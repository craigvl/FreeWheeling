@model FreeWheeling.UI.Models.SingleRideAndRandomRideViewModel
@{
    string type = ViewData["type"];
    int rideid; 
    int commentcount = Model.CommentCount;
    string submitid = "submit_First";
    string commenttextid = "CommentStringFirst";
    int parentid = Model.Ride.id;
    List<Comment> commentssingle = Model.Comments;
    List<AdHocComment> commentsrandom = Model.RandomComments;
         
    if (type == "single")
    {
        rideid = Model.Ride.id;           
    }

    if (type == "random")
    {
        rideid = Model.RandomRide.id;       
    }
}
@using FreeWheeling.Domain.Entities;
<div id="@("collapseCommentPanel" + @rideid)">
    @if (type == "single")
    {
     foreach (Comment item in @commentssingle)
     {
           @item.userName <text>: </text>
           @item.CommentText
           @:<p></p>
     }
    if (type == "random")
    {
      foreach (Comment item in @commentsrandom)
      {
            @item.userName <text>: </text>
            @item.CommentText
            @:<p></p>
      }  
    }
</div>
<div>
    @using (Ajax.BeginForm("AddComment", "Ride", new
                {
                    groupid = @Model.Group.id,
                    rideid = @rideid,
                    ParentRideID = @parentid
                }, new AjaxOptions
        {
            HttpMethod = "Post",
            OnSuccess = "CommentComplete",
            OnBegin = "ShowProgress"
        }))
    {
    <div class="form-group">
        @Html.TextBox("CommentString", null, new { @class = "form-control", id = @commenttextid, placeholder = "Enter comment" })
        <p></p>
        <span class="input-group-addon-C">
            <button class="btn btn-default" id="@submitid" type="submit">Add comment</button>
        </span>
        @Html.ActionLink(string.Concat("View all (", @commentcount, ")"), "SeeAllComments", "Ride", new { RideId = @rideid, Groupid = @Model.Group.id }, new { @class = "btn btn-default", onclick = "ShowProgress();", id = string.Concat("CommentCountSpanSeeAll", @rideid.ToString()) })
        <span id="@("CommentCountSpan" + @rideid)"></span>
    </div>
    }
</div>